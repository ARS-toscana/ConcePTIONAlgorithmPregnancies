#-------------------------------
# ConcePTION_Algorithm_Pregnancies script
#
# v2.1 - 27 July 2022
# authors: Claudia Bartolini, Rosa Gini, Giorgio Limoncella, Olga Paoletti, Davide Messina
# 
# link: https://github.com/ARS-toscana/ConcePTIONAlgorithmPregnancies
#
# changelog v2.1.13, 18 October 2022: 
#  - discarded possible concepts: GESTDIAB, PREECLAMP, PREG_BLEEDING
#
# changelog v2.1.12, 17 October 2022: 
#  - Updated codelist
#  - UOSL SB/SA week of gestation: 20 --> 22
#
# changelog v2.1.11, 10 October 2022: 
#  - D3_survey_and_visit_ids added
#
# changelog v2.1.10, 4 October 2022: 
#  - New codelist implemented
#  - New "create pregnancies from conceptset" step
#  - Implemented ongoing PROMPT
#  - alligned "procedure_livebirth"
#  - New param for legally included pregnancy
#
# changelog v2.1.9, 15 September 2022: 
#  - service before termination --> quality 99
#  - gender included in output
#
# changelog v2.1.8, 9 September 2022: 
#  - fix procedures codes added upload
#
# changelog v2.1.7, 6 September 2022: 
#  - Updated SIDIAP parameters
#
# changelog v2.1.6, 5 September 2022: 
#  - excluded procedures codes "others" for HSD
#
# changelog v2.1.5, 1 September 2022: 
#  - new flowchart added
#  - generated visit_occurrence_id fixed
#
# changelog v2.1.4, 23 August 2022: 
#  - added fix for ICD9CM
#  - added param: gap_allowed_red_record
#
# changelog v2.1.3, 22 August 2022: 
#  - changed stop in warning in step 05_check_coding_system 
#
# changelog v2.1.2, 28 July 2022: 
#  - fixed step 02_03_T2.2 
#
# changelog v2.1.1:  
#   - fixed last mestrual period implying pregancy
#   - fix in EUROCAT
#   - turned LB/SB in LB_or_SB
#   - fixed meaning_of_visit_pregnancy
#   - added FC for manuscript and specific years
# -----------------------------